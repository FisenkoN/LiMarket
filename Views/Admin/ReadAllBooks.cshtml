@using LiMarket_V1._0._0.Models
@model IEnumerable<LiMarket_V1._0._0.Models.Book>
@{
    ViewBag.Title = "ReadAllBooks";
    List<Genre> genres = ViewBag.Genres;
}

<h2>ReadAllBooks</h2>

<p>
    @Html.ActionLink("Create New", "CreateBook")
</p>
<table class="table">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.Name)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Genre)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.NumPages)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Year)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Price)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Popularity)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.IsAvaible)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.AddDate)
        </th>
        <th></th>
    </tr>

@foreach (var item in Model) {
<tr>
    <td>
        @Html.DisplayFor(modelItem => item.Name)
    </td>
    <td>
        @{
            if (item.Genre != null)
            {
                @genres.Find(g => g.Id == item.GenreId).Name;
            }
            else
            {
                <some style="color: red">Without Genre</some>
            }
        }  
        
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.NumPages)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.Year)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.Price)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.Popularity)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.IsAvaible)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.AddDate)
    </td>
    <td>
        @Html.ActionLink("Edit", "EditBook", new { id = item.Id }) |
        @Html.ActionLink("Details", "InfoBook", new { id = item.Id }) |
        @Html.ActionLink("Delete", "DeleteBook", new { id = item.Id })
    </td>
</tr>
}

</table>
